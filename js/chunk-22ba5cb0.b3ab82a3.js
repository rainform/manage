(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ba5cb0"],{"465e":function(e,t,r){},7156:function(e,t,r){var a=r("861d"),i=r("d2bb");e.exports=function(e,t,r){var n,s;return i&&"function"==typeof(n=t.constructor)&&n!==r&&a(s=n.prototype)&&s!==r.prototype&&i(e,s),e}},9370:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"b",(function(){return i}));var a=function(){function e(e,t,r,a,i,n,s,c,l,o){this.eventYear=e,this.eventName=t,this.eventStartDate=r,this.eventEndDate=a,this.registrationStartDate=i,this.registrationEndDate=n,this.longevityOpen=s,this.prayForOpen=c,this.ceremonyOpen=l,this.eventStatus=o}return e}(),i=function(){function e(e,t,r,a,i){this.eventDate=e,this.hasMealNumber=t,this.hasBreakfast=r,this.hasLunch=a,this.hasDinner=i}return e}()},"93a6":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"attendeesListPage"},[r("h2",[e._v("法會參加者列表")]),r("div",{staticClass:"container listInfo"},[r("p",[e._v(" 報名人次："+e._s(e.filteredGroups.length)+" / "+e._s(e.attendeesList.length)+"人 ")]),r("div",{staticClass:"group"},[r("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.exportCsv(t)}}},[e._v(" 匯出參加者名單(excel) ")])])]),r("div",{staticClass:"container filter-area my-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"searchString",attrs:{id:e.membersList,type:"text",placeholder:"搜尋 姓名"},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}),r("div",[r("div",{staticClass:"filter genderFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.genderFilter,expression:"genderFilter"}],attrs:{id:"male",type:"checkbox",name:"gender",value:"male"},domProps:{checked:Array.isArray(e.genderFilter)?e._i(e.genderFilter,"male")>-1:e.genderFilter},on:{change:function(t){var r=e.genderFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="male",s=e._i(r,n);a.checked?s<0&&(e.genderFilter=r.concat([n])):s>-1&&(e.genderFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.genderFilter=i}}}),r("label",{attrs:{for:"male"}},[e._v("男性")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.genderFilter,expression:"genderFilter"}],attrs:{id:"female",type:"checkbox",name:"gender",value:"female"},domProps:{checked:Array.isArray(e.genderFilter)?e._i(e.genderFilter,"female")>-1:e.genderFilter},on:{change:function(t){var r=e.genderFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="female",s=e._i(r,n);a.checked?s<0&&(e.genderFilter=r.concat([n])):s>-1&&(e.genderFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.genderFilter=i}}}),r("label",{attrs:{for:"female"}},[e._v("女性")])]),r("div",{staticClass:"filter ageFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.ageFilter,expression:"ageFilter"}],attrs:{id:"children",type:"checkbox",name:"age",value:"children"},domProps:{checked:Array.isArray(e.ageFilter)?e._i(e.ageFilter,"children")>-1:e.ageFilter},on:{change:function(t){var r=e.ageFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="children",s=e._i(r,n);a.checked?s<0&&(e.ageFilter=r.concat([n])):s>-1&&(e.ageFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.ageFilter=i}}}),r("label",{attrs:{for:"children"}},[e._v("12歲(含)以下")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ageFilter,expression:"ageFilter"}],attrs:{id:"adult",type:"checkbox",name:"age",value:"adult"},domProps:{checked:Array.isArray(e.ageFilter)?e._i(e.ageFilter,"adult")>-1:e.ageFilter},on:{change:function(t){var r=e.ageFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="adult",s=e._i(r,n);a.checked?s<0&&(e.ageFilter=r.concat([n])):s>-1&&(e.ageFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.ageFilter=i}}}),r("label",{attrs:{for:"adult"}},[e._v("13~64歲")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.ageFilter,expression:"ageFilter"}],attrs:{id:"elder",type:"checkbox",name:"age",value:"elder"},domProps:{checked:Array.isArray(e.ageFilter)?e._i(e.ageFilter,"elder")>-1:e.ageFilter},on:{change:function(t){var r=e.ageFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="elder",s=e._i(r,n);a.checked?s<0&&(e.ageFilter=r.concat([n])):s>-1&&(e.ageFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.ageFilter=i}}}),r("label",{attrs:{for:"elder"}},[e._v("65歲(含)以上")])]),r("div",{staticClass:"filter noteFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.noteFilter,expression:"noteFilter"}],attrs:{id:"hasNote",type:"checkbox",name:"note",value:"true"},domProps:{checked:Array.isArray(e.noteFilter)?e._i(e.noteFilter,"true")>-1:e.noteFilter},on:{change:function(t){var r=e.noteFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="true",s=e._i(r,n);a.checked?s<0&&(e.noteFilter=r.concat([n])):s>-1&&(e.noteFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.noteFilter=i}}}),r("label",{attrs:{for:"hasNote"}},[e._v("有備註者")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.noteFilter,expression:"noteFilter"}],attrs:{id:"noNote",type:"checkbox",name:"note",value:"false"},domProps:{checked:Array.isArray(e.noteFilter)?e._i(e.noteFilter,"false")>-1:e.noteFilter},on:{change:function(t){var r=e.noteFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="false",s=e._i(r,n);a.checked?s<0&&(e.noteFilter=r.concat([n])):s>-1&&(e.noteFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.noteFilter=i}}}),r("label",{attrs:{for:"noNote"}},[e._v("無備註者")])]),r("div",{staticClass:"filter stayFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.stayFilter,expression:"stayFilter"}],attrs:{id:"hasStay",type:"checkbox",name:"stay",value:"true"},domProps:{checked:Array.isArray(e.stayFilter)?e._i(e.stayFilter,"true")>-1:e.stayFilter},on:{change:function(t){var r=e.stayFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="true",s=e._i(r,n);a.checked?s<0&&(e.stayFilter=r.concat([n])):s>-1&&(e.stayFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.stayFilter=i}}}),r("label",{attrs:{for:"hasStay"}},[e._v("當天來回")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.stayFilter,expression:"stayFilter"}],attrs:{id:"noStay",type:"checkbox",name:"stay",value:"false"},domProps:{checked:Array.isArray(e.stayFilter)?e._i(e.stayFilter,"false")>-1:e.stayFilter},on:{change:function(t){var r=e.stayFilter,a=t.target,i=!!a.checked;if(Array.isArray(r)){var n="false",s=e._i(r,n);a.checked?s<0&&(e.stayFilter=r.concat([n])):s>-1&&(e.stayFilter=r.slice(0,s).concat(r.slice(s+1)))}else e.stayFilter=i}}}),r("label",{attrs:{for:"noStay"}},[e._v("住宿者")])])])]),r("div",{staticClass:"container"},[r("table",[e._m(0),e._l(e.filteredGroups,(function(t,a){return r("tr",{key:a},[r("td",[e._v(" "+e._s(a+1)+" ")]),r("td",[e._v(" "+e._s(t.name)+" ")]),r("td",["male"===t.gender?r("span",[e._v("男")]):e._e(),"female"===t.gender?r("span",[e._v("女")]):e._e()]),r("td",[e._v(" "+e._s(t.age)+" ")]),r("td",[e._v(" "+e._s(t.attendDate)+" ")]),r("td",[e._v(" "+e._s(t.leaveDate)+" ")]),r("td",[e._v(" "+e._s(t.note)+" ")]),r("td",[e._v(" "+e._s(e.submitTime(t.timestamp))+" ")]),r("td",[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return r.preventDefault(),e.viewMemberInfo(t)}}},[e._v(" 檢視 ")])])])}))],2)]),r("div",{staticClass:"mealNumberTable"},e._l(e.aboutEvent,(function(t,a){return r("table",{key:a},[r("tr",[r("th",{attrs:{colspan:"4"}},[e._v(" "+e._s(t.eventDate)+" 第"+e._s(a+1)+"天用餐人數 ")])]),e._m(1,!0),r("tr",[r("th",[e._v(e._s(t.hasBreakfast))]),r("th",[e._v(e._s(t.hasLunch))]),r("th",[e._v(e._s(t.hasDinner))]),r("th",[e._v(e._s(t.hasMealNumber))])])])})),0)])},i=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("序號")]),r("th",[e._v("姓名")]),r("th",[e._v("性別")]),r("th",[e._v("年齡")]),r("th",[e._v("來寺日期")]),r("th",[e._v("離寺日期")]),r("th",[e._v("備註")]),r("th",[e._v("填表日期")]),r("th",{attrs:{width:"60"}},[e._v(" 檢視 ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("tr",[r("th",[e._v("早餐")]),r("th",[e._v("午餐")]),r("th",[e._v("晚餐")]),r("th",[e._v("總人數")])])}],n=(r("159b"),r("b0c0"),r("498a"),r("a9e3"),r("fb6a"),r("d81d"),r("77d6")),s=r("f59f"),c=r("2b0e"),l=r("9370"),o=c["default"].extend({components:{},data:function(){return{eventDates:[],aboutEvent:[],checkMember:[],searchString:"",genderFilter:[],ageFilter:[],noteFilter:[],stayFilter:[]}},computed:{eventInfo:function(){return this.$store.state.eventInfo},membersList:function(){return this.$store.state.membersList},attendeesList:function(){var e=this.$store.state.attendeesList,t=[];return e.forEach((function(e){""===e.name&&""===e.gender&&""===e.age&&""===e.attendDate&&""===e.attendTime&&""===e.leaveDate&&""===e.leaveTime&&""===e.note||t.push(e)})),t},trimSearchString:function(){var e=this.searchString.trim();return e||e},searchStringList:function(){var e=this,t=[];return this.attendeesList.forEach((function(r){var a="";a=r.name;var i=e.trimSearchString,n=a.toUpperCase().indexOf(i.toUpperCase());n>=0&&t.push(r)})),t},genderFilterList:function(){var e=this,t=[];return this.attendeesList.forEach((function(r){var a="";a=r.gender,e.genderFilter.forEach((function(e){a===e&&t.push(r)}))})),t},ageFilterList:function(){var e=this,t=[];return this.attendeesList.forEach((function(r){var a="";a=r.age,e.ageFilter.forEach((function(e){Number(a)<=12&&"children"===e&&t.push(r),Number(a)>12&&Number(a)<65&&"adult"===e&&t.push(r),Number(a)>=65&&"elder"===e&&t.push(r)}))})),t},noteFilterList:function(){var e=this,t=[];return this.attendeesList.forEach((function(r){var a="";a=r.note,e.noteFilter.forEach((function(e){""!==a&&"true"===e&&t.push(r),""===a&&"false"===e&&t.push(r)}))})),t},stayFilterList:function(){var e=this,t=[];return this.attendeesList.forEach((function(r){var a=r.attendDate,i=r.leaveDate;e.stayFilter.forEach((function(e){a===i&&"true"===e&&t.push(r),a!==i&&"false"===e&&t.push(r)}))})),t},filteredGroups:function(){return""!==this.trimSearchString?this.searchStringList:this.genderFilter.length>0?this.genderFilterList:this.ageFilter.length>0?this.ageFilterList:this.noteFilter.length>0?this.noteFilterList:this.stayFilter.length>0?this.stayFilterList:this.attendeesList}},mounted:function(){this.calculateEventDate(),this.addEventMealTable(),this.calculateMealNumber()},methods:{addEventMealTable:function(){for(var e=0;e<this.eventDates.length;e+=1)this.aboutEvent.push(new l["b"](this.eventDates[e],0,0,0,0))},calculateEventDate:function(){var e=[],t=Date.parse(this.eventInfo.eventStartDate),r=Date.parse(this.eventInfo.eventEndDate),a=Math.ceil((r-t)/864e5);e.push(this.submitTime(t));for(var i=1;i<=a;i+=1){var n=t+864e5*i;e.push(this.submitTime(n))}this.eventDates=e},calculateMealNumber:function(){var e=this;this.attendeesList.forEach((function(t){var r=[],a=Date.parse(t.attendDate),i=Date.parse(t.leaveDate),n=Math.ceil((i-a)/864e5);r.push(e.submitTime(a));for(var s=1;s<=n;s+=1){var c=a+864e5*s;r.push(e.submitTime(c))}var l=r[0],o=r[r.length-1],h=r.slice(1,r.length-1);e.aboutEvent.forEach((function(e){l===e.eventDate&&("beforeBreakfast"===t.attendTime&&(e.hasBreakfast+=1,e.hasLunch+=1,e.hasDinner+=1,e.hasMealNumber+=1),"beforeLunch"===t.attendTime&&(e.hasLunch+=1,e.hasDinner+=1,e.hasMealNumber+=1),"beforeDinner"===t.attendTime&&(e.hasDinner+=1,e.hasMealNumber+=1),t.attendTime);for(var r=0;r<h.length;r+=1)h[r]===e.eventDate&&(e.hasMealNumber+=1,e.hasBreakfast+=1,e.hasLunch+=1,e.hasDinner+=1);o===e.eventDate&&(l!==o&&(t.leaveTime,"beforeLunch"===t.leaveTime&&(e.hasBreakfast+=1,e.hasMealNumber+=1),"beforeDinner"===t.leaveTime&&(e.hasBreakfast+=1,e.hasLunch+=1,e.hasMealNumber+=1),"afterDinner"===t.leaveTime&&(e.hasBreakfast+=1,e.hasLunch+=1,e.hasDinner+=1,e.hasMealNumber+=1)),l===o&&("beforeBreakfast"===t.leaveTime&&(e.hasBreakfast-=1),"beforeLunch"===t.leaveTime&&(e.hasLunch-=1),"beforeDinner"===t.leaveTime&&(e.hasDinner-=1),t.leaveTime))}))}))},submitTime:function(e){var t=new Date(e);return t.toLocaleDateString()},viewMemberInfo:function(e){var t={};this.membersList.forEach((function(r){r.ceremonyForm.attendInfoList.forEach((function(a){a.name===e.name&&a.age===e.age&&(t=r.ceremonyForm)}))})),this.$router.push("viewMemberInfo"),this.$store.commit("updateMemberInfo",t)},exportCsv:function(){var e=this.filteredGroups.map((function(e){return{"姓名":e.name,"性別":e.gender,"年齡":e.age,"來寺日期":e.attendDate,"離寺日期":e.leaveDate,"備註":e.note,"填表日期":e.timestamp}})),t=["姓名","性別","年齡","來寺日期","離寺日期","備註","填表日期"],r={fields:t};try{var a=Object(s["parse"])(e,r);console.log(a),this.$notify({type:"success",title:"已匯出法會參加者列表"}),n["a"].exportCsv("法會參加者列表.csv",a)}catch(i){console.error(i)}}}}),h=o,u=(r("9c34"),r("2877")),d=Object(u["a"])(h,a,i,!1,null,"44d34ded",null);t["default"]=d.exports},"9c34":function(e,t,r){"use strict";r("465e")},a9e3:function(e,t,r){"use strict";var a=r("83ab"),i=r("da84"),n=r("94ca"),s=r("6eeb"),c=r("5135"),l=r("c6b6"),o=r("7156"),h=r("c04e"),u=r("d039"),d=r("7c73"),v=r("241c").f,f=r("06cf").f,m=r("9bf2").f,g=r("58a8").trim,p="Number",F=i[p],y=F.prototype,b=l(d(y))==p,_=function(e){var t,r,a,i,n,s,c,l,o=h(e,!1);if("string"==typeof o&&o.length>2)if(o=g(o),t=o.charCodeAt(0),43===t||45===t){if(r=o.charCodeAt(2),88===r||120===r)return NaN}else if(48===t){switch(o.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+o}for(n=o.slice(2),s=n.length,c=0;c<s;c++)if(l=n.charCodeAt(c),l<48||l>i)return NaN;return parseInt(n,a)}return+o};if(n(p,!F(" 0o1")||!F("0b1")||F("+0x1"))){for(var k,A=function(e){var t=arguments.length<1?0:e,r=this;return r instanceof A&&(b?u((function(){y.valueOf.call(r)})):l(r)!=p)?o(new F(_(t)),r,A):_(t)},N=a?v(F):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),D=0;N.length>D;D++)c(F,k=N[D])&&!c(A,k)&&m(A,k,f(F,k));A.prototype=y,y.constructor=A,s(i,p,A)}},fb6a:function(e,t,r){"use strict";var a=r("23e7"),i=r("861d"),n=r("e8b5"),s=r("23cb"),c=r("50c4"),l=r("fc6a"),o=r("8418"),h=r("b622"),u=r("1dde"),d=u("slice"),v=h("species"),f=[].slice,m=Math.max;a({target:"Array",proto:!0,forced:!d},{slice:function(e,t){var r,a,h,u=l(this),d=c(u.length),g=s(e,d),p=s(void 0===t?d:t,d);if(n(u)&&(r=u.constructor,"function"!=typeof r||r!==Array&&!n(r.prototype)?i(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return f.call(u,g,p);for(a=new(void 0===r?Array:r)(m(p-g,0)),h=0;g<p;g++,h++)g in u&&o(a,h,u[g]);return a.length=h,a}})}}]);
//# sourceMappingURL=chunk-22ba5cb0.b3ab82a3.js.map