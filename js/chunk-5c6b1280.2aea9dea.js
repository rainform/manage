(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5c6b1280"],{"0f28":function(e,t,r){},"4b80":function(e,t,r){"use strict";r("0f28")},a434:function(e,t,r){"use strict";var i=r("23e7"),o=r("23cb"),n=r("a691"),a=r("50c4"),s=r("7b0b"),l=r("65f0"),c=r("8418"),m=r("1dde"),d=m("splice"),h=Math.max,f=Math.min,u=9007199254740991,v="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d},{splice:function(e,t){var r,i,m,d,p,g,F=s(this),b=a(F.length),M=o(e,b),_=arguments.length;if(0===_?r=i=0:1===_?(r=0,i=b-M):(r=_-2,i=f(h(n(t),0),b-M)),b+r-i>u)throw TypeError(v);for(m=l(F,i),d=0;d<i;d++)p=M+d,p in F&&c(m,d,F[p]);if(m.length=i,r<i){for(d=M;d<b-i;d++)p=d+i,g=d+r,p in F?F[g]=F[p]:delete F[g];for(d=b;d>b-i+r;d--)delete F[d-1]}else if(r>i)for(d=b-i;d>M;d--)p=d+i-1,g=d+r-1,p in F?F[g]=F[p]:delete F[g];for(d=0;d<r;d++)F[d+M]=arguments[d+2];return F.length=b-i+r,m}})},d084:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"MembersListPage"},[r("h2",[e._v("會員名單")]),r("div",{staticClass:"container listInfo"},[r("p",[e._v(" 會員人數："+e._s(e.filteredGroups.length)+" / "+e._s(e.membersList.length)+"人 ")]),r("div",[r("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.exportCsv(t)}}},[e._v(" 匯出全部會員名單(excel) ")]),r("button",{staticClass:"btn btn-info btn-sm ml-2",on:{click:function(t){return t.preventDefault(),e.createNewMember(t)}}},[e._v(" 新增會員(填寫報名表) ")])])]),r("div",{staticClass:"container filter-area my-3"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.searchString,expression:"searchString"}],staticClass:"searchString",attrs:{id:e.membersList,type:"text",placeholder:"搜尋 姓名或電話"},domProps:{value:e.searchString},on:{input:function(t){t.target.composing||(e.searchString=t.target.value)}}}),r("div",[r("div",{staticClass:"filter informMethodFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.informMethodFilter,expression:"informMethodFilter"}],attrs:{id:"letter",type:"checkbox",name:"informMethod",value:"letter"},domProps:{checked:Array.isArray(e.informMethodFilter)?e._i(e.informMethodFilter,"letter")>-1:e.informMethodFilter},on:{change:function(t){var r=e.informMethodFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="letter",a=e._i(r,n);i.checked?a<0&&(e.informMethodFilter=r.concat([n])):a>-1&&(e.informMethodFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.informMethodFilter=o}}}),r("label",{attrs:{for:"letter"}},[e._v("郵寄通知")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.informMethodFilter,expression:"informMethodFilter"}],attrs:{id:"textmsg",type:"checkbox",name:"informMethod",value:"textmsg"},domProps:{checked:Array.isArray(e.informMethodFilter)?e._i(e.informMethodFilter,"textmsg")>-1:e.informMethodFilter},on:{change:function(t){var r=e.informMethodFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="textmsg",a=e._i(r,n);i.checked?a<0&&(e.informMethodFilter=r.concat([n])):a>-1&&(e.informMethodFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.informMethodFilter=o}}}),r("label",{attrs:{for:"textmsg"}},[e._v("簡訊通知")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.informMethodFilter,expression:"informMethodFilter"}],attrs:{id:"email",type:"checkbox",name:"informMethod",value:"email"},domProps:{checked:Array.isArray(e.informMethodFilter)?e._i(e.informMethodFilter,"email")>-1:e.informMethodFilter},on:{change:function(t){var r=e.informMethodFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="email",a=e._i(r,n);i.checked?a<0&&(e.informMethodFilter=r.concat([n])):a>-1&&(e.informMethodFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.informMethodFilter=o}}}),r("label",{attrs:{for:"email"}},[e._v("E-mail通知")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.informMethodFilter,expression:"informMethodFilter"}],attrs:{id:"inform",type:"checkbox",name:"informMethod",value:"line"},domProps:{checked:Array.isArray(e.informMethodFilter)?e._i(e.informMethodFilter,"line")>-1:e.informMethodFilter},on:{change:function(t){var r=e.informMethodFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="line",a=e._i(r,n);i.checked?a<0&&(e.informMethodFilter=r.concat([n])):a>-1&&(e.informMethodFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.informMethodFilter=o}}}),r("label",{attrs:{for:"inform"}},[e._v("Line通知")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.informMethodFilter,expression:"informMethodFilter"}],attrs:{id:"wechat",type:"checkbox",name:"informMethod",value:"wechat"},domProps:{checked:Array.isArray(e.informMethodFilter)?e._i(e.informMethodFilter,"wechat")>-1:e.informMethodFilter},on:{change:function(t){var r=e.informMethodFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="wechat",a=e._i(r,n);i.checked?a<0&&(e.informMethodFilter=r.concat([n])):a>-1&&(e.informMethodFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.informMethodFilter=o}}}),r("label",{attrs:{for:"wechat"}},[e._v("Wechat通知")])]),r("div",{staticClass:"filter registeredFilter"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.registeredFilter,expression:"registeredFilter"}],attrs:{id:"hasRegistered",type:"checkbox",name:"registered",value:"true"},domProps:{checked:Array.isArray(e.registeredFilter)?e._i(e.registeredFilter,"true")>-1:e.registeredFilter},on:{change:function(t){var r=e.registeredFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="true",a=e._i(r,n);i.checked?a<0&&(e.registeredFilter=r.concat([n])):a>-1&&(e.registeredFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.registeredFilter=o}}}),r("label",{attrs:{for:"hasRegistered"}},[e._v("已報名")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.registeredFilter,expression:"registeredFilter"}],attrs:{id:"noRegistered",type:"checkbox",name:"registered",value:"false"},domProps:{checked:Array.isArray(e.registeredFilter)?e._i(e.registeredFilter,"false")>-1:e.registeredFilter},on:{change:function(t){var r=e.registeredFilter,i=t.target,o=!!i.checked;if(Array.isArray(r)){var n="false",a=e._i(r,n);i.checked?a<0&&(e.registeredFilter=r.concat([n])):a>-1&&(e.registeredFilter=r.slice(0,a).concat(r.slice(a+1)))}else e.registeredFilter=o}}}),r("label",{attrs:{for:"noRegistered"}},[e._v("尚未報名")])])])]),r("div",{staticClass:"container"},[r("table",[e._m(0),r("tbody",e._l(e.filteredGroups,(function(t,i){return r("tr",{key:i},[r("td",{attrs:{width:"90"}},[t.streamId?r("span",[e._v(" "+e._s(t.streamId)+" ")]):r("span",[e._v(" 無序號 ")])]),r("td",[e._v(" "+e._s(t.ceremonyForm.personalInformation.name)+" ")]),r("td",[e._v(" "+e._s(t.ceremonyForm.personalInformation.phone)+" ")]),r("td",[!0===t.isLastEventSubmitted?r("span",[e._v(" 有 ")]):e._e(),!1===t.isLastEventSubmitted?r("span",[e._v(" 沒有 ")]):e._e()]),r("td",[!0===t.isSubmitted?r("span",{staticStyle:{color:"green"}},[e._v(" 已報名 ")]):e._e(),!1===t.isSubmitted?r("span",{staticStyle:{color:"red"}},[e._v(" 尚未報名 ")]):e._e()]),r("td",["letter"===t.ceremonyForm.personalInformation.informMethod?r("span",[e._v("郵寄通知")]):e._e(),"textmsg"===t.ceremonyForm.personalInformation.informMethod?r("span",[e._v("簡訊通知")]):e._e(),"email"===t.ceremonyForm.personalInformation.informMethod?r("span",[e._v("Email通知")]):e._e(),"line"===t.ceremonyForm.personalInformation.informMethod?r("span",[e._v("Line通知")]):e._e(),"wechat"===t.ceremonyForm.personalInformation.informMethod?r("span",[e._v("Wechat通知")]):e._e()]),r("td",[""===t.signature?r("span",[e._v(" 本人 ")]):e._e(),""!==t.signature?r("span",[e._v(" "+e._s(t.signature)+" ")]):e._e()]),r("td",{attrs:{width:"60"}},[r("button",{staticClass:"btn btn-outline-secondary btn-sm",on:{click:function(r){return r.preventDefault(),e.viewMemberForm(t)}}},[e._v(" 檢視 ")])]),r("td",[r("button",{staticClass:"btn no-bg-btn",on:{click:function(t){return t.preventDefault(),e.deletePerson(i)}}},[r("i",{staticClass:"fas fa-trash-alt"})])])])})),0)])]),r("v-dialog")],1)},o=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("thead",[r("tr",[r("th",{attrs:{width:"90"}},[e._v(" 報名序號 ")]),r("th",[e._v("姓名")]),r("th",[e._v("電話")]),r("th",[e._v("上次有無報名")]),r("th",[e._v("最新活動報名狀態")]),r("th",[e._v("通知方式")]),r("th",[e._v("登錄者")]),r("th",{attrs:{width:"60"}},[e._v(" 檢視 ")]),r("th",{attrs:{width:"60"}},[e._v(" 刪除 ")])])])}],n=(r("498a"),r("159b"),r("b0c0"),r("a434"),r("d81d"),r("9ab4")),a=r("ad19"),s=r("feed"),l=r("2b0e"),c=r("f59f"),m=r("77d6"),d=l["default"].extend({components:{},data:function(){return{searchString:"",checkMember:[],informMethodFilter:[],registeredFilter:[],informMethods:["letter","textmsg","email","line","wechat"]}},computed:{membersList:function(){return this.$store.state.membersList},trimSearchString:function(){var e=this.searchString.trim();return e||e},searchStringList:function(){var e=this,t=[];return this.membersList.forEach((function(r){var i="",o="";i=r.ceremonyForm.personalInformation.name,o=r.ceremonyForm.personalInformation.phone;var n=e.trimSearchString,a=i.toUpperCase().indexOf(n.toUpperCase());a>=0&&t.push(r);var s=o.toUpperCase().indexOf(n.toUpperCase());s>=0&&t.push(r)})),t},informMethodList:function(){var e=this,t=[];return this.membersList.forEach((function(r){var i="";i=r.ceremonyForm.personalInformation.informMethod,e.informMethodFilter.forEach((function(e){i===e&&t.push(r)}))})),t},registeredList:function(){var e=this,t=[];return this.membersList.forEach((function(r){var i="";i=String(r.isSubmitted),e.registeredFilter.forEach((function(e){i===e&&t.push(r)}))})),t},filteredGroups:function(){return""!==this.trimSearchString?this.searchStringList:this.informMethodFilter.length>0?this.informMethodList:this.registeredFilter.length>0?this.registeredList:this.membersList}},methods:{viewMemberForm:function(e){this.$router.push("viewMemberForm"),this.$store.commit("updateMemberForm",e)},createNewMember:function(){this.$router.push("ceremonyFormsPage/textname"),this.$store.commit("updateMemberForm",new s["a"]),this.$store.commit("updateConfirmApplication",!1),this.$store.commit("updateCheckedRepeatList",!1)},deletePerson:function(e){this.openDeleteModal(e)},openDeleteModal:function(e){var t=this;this.$modal.show("dialog",{title:"確定刪除嗎?",text:"刪掉就不會再回來了",buttons:[{title:"取消",handler:function(){t.$modal.hide("dialog")}},{title:"確定",handler:function(){t.$modal.hide("dialog"),t.delete(e)}}]})},delete:function(e){return Object(n["a"])(this,void 0,void 0,(function(){return Object(n["b"])(this,(function(t){switch(t.label){case 0:return e>=0&&e<this.membersList.length?[4,a["a"].delete(this.membersList[e].formId)]:[3,2];case 1:t.sent(),this.membersList.splice(e,1),t.label=2;case 2:return[2]}}))}))},exportCsv:function(){var e=this.filteredGroups.map((function(e){return{"姓名":e.ceremonyForm.personalInformation.name,"電話":e.ceremonyForm.personalInformation.phone,"上次有無報名":e.isLastEventSubmitted,"最新活動報名狀態":e.isSubmitted,"通知方式":e.ceremonyForm.personalInformation.informMethod}})),t=["姓名","電話","上次有無報名","最新活動報名狀態","通知方式"],r={fields:t};try{var i=Object(c["parse"])(e,r);console.log(i),this.$notify({type:"success",title:"已匯出會員名單"}),m["a"].exportCsv("會員名單.csv",i)}catch(o){console.error(o)}}}}),h=d,f=(r("4b80"),r("2877")),u=Object(f["a"])(h,i,o,!1,null,"f33b32f4",null);t["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5c6b1280.2aea9dea.js.map