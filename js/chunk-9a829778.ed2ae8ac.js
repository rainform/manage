(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a829778"],{"2cda":function(e,t,n){},"66f9":function(e,t,n){"use strict";n("2cda")},9370:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}));var a=function(){function e(e,t,n,a,i,o,s,r,v,u){this.eventYear=e,this.eventName=t,this.eventStartDate=n,this.eventEndDate=a,this.registrationStartDate=i,this.registrationEndDate=o,this.longevityOpen=s,this.prayForOpen=r,this.ceremonyOpen=v,this.eventStatus=u}return e}(),i=function(){function e(e,t,n,a,i){this.eventDate=e,this.hasMealNumber=t,this.hasBreakfast=n,this.hasLunch=a,this.hasDinner=i}return e}()},cc28:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"eventForm"},[n("div",{staticClass:"container"},[n("h2",[e._v(" 檢視 / 編輯活動 ")]),n("div",{staticClass:"eventType"},[!0===e.empty&&"viewOnly"===e.eventFormStatus?n("div",[e._m(0),n("a",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.editEvent("empty")}}},[e._v(" 創立新活動 ")])]):e._e(),!0===e.overTime&&"viewOnly"===e.eventFormStatus?n("div",[e._m(1),n("a",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.editEvent("overTime")}}},[e._v(" 創立新活動 ")])]):e._e(),!1===e.empty&&!1===e.overTime&&"viewOnly"===e.eventFormStatus?n("div",[e._m(2),n("a",{staticClass:"btn btn-primary btn-sm",on:{click:function(t){return t.preventDefault(),e.editEvent("normal")}}},[e._v(" 編輯此活動 ")])]):e._e()]),n("form",{class:{"view-only":"viewOnly"===e.eventFormStatus}},[n("div",{staticClass:"q-group"},[n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"eventYear"}},[e._v("年度")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.eventYear,expression:"eventInfo.eventYear"}],attrs:{id:"eventYear",type:"text",placeholder:"請填寫活動年度",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.eventYear},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"eventYear",t.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"eventName"}},[e._v("活動名稱")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.eventName,expression:"eventInfo.eventName"}],attrs:{id:"eventName",type:"text",placeholder:"請填寫活動名稱",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.eventName},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"eventName",t.target.value)}}})])]),n("div",{staticClass:"q-group"},[n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"eventStartDate"}},[e._v("活動開始日期")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.eventStartDate,expression:"eventInfo.eventStartDate"}],attrs:{id:"eventStartDate",type:"datetime-local",placeholder:"請填寫活動報名開始日期",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.eventStartDate},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"eventStartDate",t.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"eventEndDate"}},[e._v("活動截止日期")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.eventEndDate,expression:"eventInfo.eventEndDate"}],attrs:{id:"eventEndDate",type:"datetime-local",placeholder:"請填寫活動報名截止日期",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.eventEndDate},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"eventEndDate",t.target.value)}}})])]),n("div",{staticClass:"q-group"},[n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"registrationStartDate"}},[e._v("報名開始日期")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.registrationStartDate,expression:"eventInfo.registrationStartDate"}],attrs:{id:"registrationStartDate",type:"datetime-local",placeholder:"請填寫活動報名開始日期",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.registrationStartDate},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"registrationStartDate",t.target.value)}}})]),n("div",{staticClass:"input-group"},[n("label",{attrs:{for:"registrationEndDate"}},[e._v("報名截止日期")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.eventInfo.registrationEndDate,expression:"eventInfo.registrationEndDate"}],attrs:{id:"registrationEndDate",type:"datetime-local",placeholder:"請填寫活動報名截止日期",disabled:"viewOnly"===e.eventFormStatus},domProps:{value:e.eventInfo.registrationEndDate},on:{input:function(t){t.target.composing||e.$set(e.eventInfo,"registrationEndDate",t.target.value)}}})])])]),n("div",{staticClass:"group"},[n("div",["edit"===e.eventFormStatus?n("a",{staticClass:"btn btn-dark mr-3",on:{click:function(t){return t.preventDefault(),e.cancelEdit(t)}}},[e._v(" 取消 ")]):e._e(),"edit"===e.eventFormStatus?n("a",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.saveEventEdit(t)}}},[!0===e.overTime?n("span",[e._v("創立新活動")]):e._e(),!1===e.overTime?n("span",[e._v("完成編輯")]):e._e()]):e._e()])])])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("活動狀態："),n("span",{staticStyle:{color:"red"}},[e._v("尚未有任何活動")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("活動狀態： "),n("span",{staticStyle:{color:"red"}},[e._v("已過期")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("p",[e._v("活動狀態："),n("span",{staticStyle:{color:"green"}},[e._v("進行中")])])}],o=n("9ab4"),s=n("16f4"),r=n("ad19"),v=n("9370"),u=n("2b0e"),l=u["default"].extend({components:{},data:function(){return{eventInfo:new v["a"]("","","","","","","open","open","open",!0),empty:!1,overTime:!1}},computed:{eventFormStatus:function(){return this.$store.state.eventFormStatus},getEventInfo:function(){return this.$store.state.eventInfo}},mounted:function(){this.init()},methods:{init:function(){if(this.$store.commit("updateEventFormStatus","viewOnly"),""===this.getEventInfo.eventName)this.empty=!0;else{this.eventInfo=this.getEventInfo;var e=Date.parse(this.eventInfo.eventEndDate),t=Date.now();e<t&&(this.overTime=!0)}Date.parse(this.getEventInfo.eventEndDate)<Date.now()&&(this.overTime=!0)},cancelEdit:function(){this.$store.commit("updateEventFormStatus","viewOnly"),this.eventInfo=this.getEventInfo},editEvent:function(e){this.$store.commit("updateEventFormStatus","edit"),"normal"===e&&(this.eventInfo=new v["a"](this.eventInfo.eventYear,this.eventInfo.eventName,this.eventInfo.eventStartDate,this.eventInfo.eventEndDate,this.eventInfo.registrationStartDate,this.eventInfo.registrationEndDate,this.eventInfo.longevityOpen,this.eventInfo.prayForOpen,this.eventInfo.ceremonyOpen,!0)),"empty"===e&&(this.eventInfo=new v["a"]("","","","","","","open","open","open",!0)),"overTime"===e&&(this.eventInfo=new v["a"]("","","","","","","open","open","open",!0))},saveEventEdit:function(){return Object(o["a"])(this,void 0,void 0,(function(){var e=this;return Object(o["b"])(this,(function(t){switch(t.label){case 0:return""===this.eventInfo.eventName?[3,2]:(!0===this.overTime&&(this.overTime=!1,this.resetEvent(),this.$notify({type:"success",title:"清除去年資料，儲存為新的活動"})),this.$store.commit("updateEventFormStatus","viewOnly"),[4,s["a"].save(this.eventInfo)]);case 1:return t.sent(),r["a"].list().then((function(t){e.$store.commit("updateMemberList",t)})),r["a"].listCeremonyAttendees().then((function(t){e.$store.commit("updateAttendeesList",t)})),s["a"].retrieve().then((function(t){e.$store.commit("updateEventInfo",t)})),[3,3];case 2:console.log("空表單不可送出"),t.label=3;case 3:return[2]}}))}))},resetEvent:function(){r["a"].resetForms()}}}),c=l,d=(n("66f9"),n("2877")),m=Object(d["a"])(c,a,i,!1,null,"1324048c",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-9a829778.ed2ae8ac.js.map